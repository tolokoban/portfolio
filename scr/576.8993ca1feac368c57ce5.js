"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[576],{1576:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var i=n(5893),r=(n(4095),n(2386),n(9233),n(3046),n(7542),n(1543)),a=n(851),s=n(1558),o=n(7294),c=n(3379),h=n.n(c),u=n(7795),l=n.n(u),m=n(569),f=n.n(m),d=n(3565),v=n.n(d),x=n(9216),p=n.n(x),g=n(4589),y=n.n(g),C=n(7424),b={};b.styleTagTransform=y(),b.setAttributes=v(),b.insert=f().bind(null,"head"),b.domAPI=l(),b.insertStyleElement=p(),h()(C.Z,b);const A=C.Z&&C.Z.locals?C.Z.locals:void 0;var w=n(1351),P=n(7381);const R=function(){function e(e){this.scene=e,this.roll=0,this.pitch=0,this.pinned=!1,this.axisX=new w.AO(1,0,0),this.axisY=new w.AO(0,1,0),this.axisZ=new w.AO(0,0,1),this.rotatedAxisX=new w.AO(0),this.rotatedAxisY=new w.AO(0),this.rotatedAxisZ=new w.AO(0),this.cameraOrientation=[1,0,0,0,1,0,0,0,1],this.cameraPosition=[0,0,1];var t=e.gl;this.res=e.getResources("BlendDemo"),this.prg=this.res.createProgram({vert:"#version 300 es\n\nuniform mat3 uniCameraOrientation;\nin vec2 attRay;\nout vec3 varRay;\n\nvoid main() {\n    varRay = uniCameraOrientation * vec3(1.0, attRay);\n    gl_Position = vec4(attRay, 0.0, 1.0);\n}",frag:"#version 300 es\n\nprecision mediump float;\n\nuniform vec3 uniCameraPosition;\nuniform samplerCube uniSkybox;\n\nin vec3 varRay;\nout vec4 FragColor;\n\nvoid main() {\n    if (varRay.z >= 0.0) {\n        FragColor = texture(uniSkybox, normalize(varRay.xzy));\n    } else {\n        float factor = -uniCameraPosition.z / varRay.z;\n        float x = uniCameraPosition.x + factor * varRay.x;\n        float y = uniCameraPosition.y + factor * varRay.y;\n        float a = smoothstep(-.001, .001, cos(x) * cos(y));\n        vec3 color = mix(vec3(0.2, 1, 0), vec3(.5, .7, .2), a);\n        float dist = distance(uniCameraPosition, vec3(x, y, 0));\n        float b = clamp(25.0 / dist, 0.0, 1.0);\n        FragColor = vec4(mix(vec3(0.84, 0.85 , 0.83), color, b) , 1.0);\n    }\n}"}),this.uniCameraPosition=e.getUniformLocation(this.prg,"uniCameraPosition"),this.uniCameraOrientation=e.getUniformLocation(this.prg,"uniCameraOrientation"),this.uniSkybox=e.getUniformLocation(this.prg,"uniSkybox"),this.vao=this.res.createVertexArray(),this.buffer=this.res.createBuffer(),this.data=(0,P._)(4,{attRay:2}),this.data.poke("attRay",[1,1,1,-1,-1,-1,-1,1]),this.data.push(e.gl,this.buffer),t.bindVertexArray(this.vao),this.data.defineAttributes(t,this.prg,this.buffer),t.bindVertexArray(null),this.image=e.asset.createImage("images/common/skybox/skybox.webp"),this.texture=this.res.createTexture(),e.texture.loadTextureCubeMap(this.texture,this.image)}return e.prototype.destroy=function(){this.res.deleteBuffer(),this.res.deleteProgram(),this.res.deleteVertexArray(),this.res.deteleTexture(),this.scene.asset.destroyImage(this.image)},e.prototype.paint=function(e,t){var n=this,i=n.prg,r=n.vao,a=n.scene.gl;a.useProgram(i),a.uniform3fv(this.uniCameraPosition,this.cameraPosition),a.uniformMatrix3fv(this.uniCameraOrientation,!1,this.cameraOrientation),a.uniform1i(this.uniSkybox,0),a.bindVertexArray(r),a.drawArrays(a.TRIANGLE_FAN,0,4),a.bindVertexArray(null)},e.prototype.update=function(e,t){var n=this.roll,i=this.pitch;this.pinned||(n>0?this.roll=Math.max(0,n-2e-4*t):n<0&&(this.roll=Math.min(0,n+2e-4*t)),i>0?this.pitch=Math.max(0,i-.001*t):i<0&&(this.pitch=Math.min(0,i+.001*t)));var r=this,a=r.axisX,s=r.axisY,o=r.axisZ,c=r.rotatedAxisX,h=r.rotatedAxisY,u=r.rotatedAxisZ,l=1e-4*e;(0,w.Qm)(a,l,c),(0,w.Qm)(s,l,h),(0,w.Qm)(o,l,u),(0,w.QC)(c,i,c),(0,w.QC)(h,i,h),(0,w.QC)(u,i,u);var m=new w.AO(0);(0,w.QC)(new w.AO(1,0,0),i,m),(0,w.Bq)(c,m,n,c),(0,w.Bq)(h,m,n,h),(0,w.Bq)(u,m,n,u),this.cameraOrientation=[c.x,c.y,c.z,h.x,h.y,h.z,u.x,u.y,u.z];var f=.01*t;this.cameraPosition[0]-=f*Math.sin(l),this.cameraPosition[1]+=f*Math.cos(l),this.cameraPosition[2]=11+10*Math.cos(.0002427022*e)},e}();function O(e){var t=e.className,n=o.useRef(null),c=o.useRef(null);return(0,i.jsx)("div",{className:k(t,A.InfinitePlanDemo),children:(0,i.jsx)("canvas",{ref:function(e){if(e&&!n.current){var t=new a.Z(e,{alpha:!1,preserveDrawingBuffer:!1,antialias:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!1,powerPreference:"high-performance"});n.current=t;var i=new R(t);c.current=i;var o=new s.Z;o.attach(e),o.eventDrag.addListener(function(e,t){return function(n){var i=n.current.x-n.previous.x,r=n.current.y-n.previous.y;t.roll+=i,t.pitch+=r,e.paint()}}(t,i)),o.eventDown.addListener((function(){return i.pinned=!0})),o.eventUp.addListener((function(){return i.pinned=!1}));var h=new r.x(t,{colorValue:[.3,.5,1,1]});t.addPainter(h,i),t.animate=!0}},width:512,height:512,onDoubleClick:j})})}function k(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter((function(e){return"string"==typeof e})).join(" ")}function j(e){e.target.requestFullscreen({navigationUI:"hide"})}function Z(e){const t={h1:"h1",li:"li",ul:"ul",...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{children:"Infinite Plane"}),"\n",(0,i.jsx)("div",{className:"margin-left",children:(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Drag your mouse on the scene to change the camera angles."}),"\n",(0,i.jsx)(t.li,{children:"Double click to toggle fullscreen."}),"\n"]})}),"\n",(0,i.jsx)(O,{})]})}function I(e={}){const{wrapper:t}=e.components||{};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(Z,{...e})}):Z(e)}},7424:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(8081),r=n.n(i),a=n(3645),s=n.n(a)()(r());s.push([e.id,".tnnLfgrJr5TIF9X3Csvv {\n    width: 100%;\n    display: grid;\n    place-items: center;\n}\n\n.tnnLfgrJr5TIF9X3Csvv > canvas {\n    width: 640px;\n    height: 480px;\n    max-width: 100vw;\n    max-height: 100vmin;\n}\n",""]),s.locals={InfinitePlanDemo:"tnnLfgrJr5TIF9X3Csvv"};const o=s},851:(e,t,n)=>{n.d(t,{Z:()=>i.Z});var i=n(329)}}]);